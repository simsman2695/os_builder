# rock-5b.conf — board-specific configuration for Radxa Rock 5B

# ── SoC / board identity ────────────────────────────────────────────────────
BOARD_CHIP="rk3588"
BOARD_NAME="Rock 5B"

# ── kernel ───────────────────────────────────────────────────────────────────
KERNEL_VERSION="auto"
KERNEL_DEFCONFIG="rockchip_linux_defconfig"
KERNEL_CONFIG_FRAGMENTS=("arch/arm64/configs/rk3588_linux.config")

# DTS files to fetch from Radxa's kernel fork (empty = kernel has them built-in)
DTS_REPO="https://github.com/radxa/kernel"
DTS_BRANCH="linux-6.1-stan-rkr4.1"
DTS_FILES=()
DTB_TARGETS=(
    "rk3588-rock-5b.dtb"
)

# ── U-Boot / bootloader layout (sector = 512 bytes) ─────────────────────────
# idbloader.img at sector 64  (byte offset 32768)
# u-boot.itb    at sector 16384 (byte offset 8388608)
UBOOT_IDBLOADER_OFFSET=64     # sectors
UBOOT_ITB_OFFSET=16384        # sectors

# Prebuilt U-Boot binary URLs (empty = build from source)
# Set via --prebuilt-uboot flag or manually here
UBOOT_IDBLOADER_URL=""
UBOOT_ITB_URL=""

# Known-good prebuilt U-Boot (mainline, inindev build for Rock 5B)
UBOOT_PREBUILT_IDBLOADER_URL="https://github.com/inindev/rock-5b/releases/download/v12-6.7-rc7/idbloader.img"
UBOOT_PREBUILT_ITB_URL="https://github.com/inindev/rock-5b/releases/download/v12-6.7-rc7/u-boot.itb"

# U-Boot build from source
UBOOT_REPO="https://github.com/radxa/u-boot.git"
UBOOT_BRANCH="stable-5.10-rock5"
UBOOT_DEFCONFIG="rock-5b-rk3588_defconfig"

# rkbin (BL31 + DDR blob)
RKBIN_REPO="https://github.com/rockchip-linux/rkbin.git"
RKBIN_BL31="bin/rk35/rk3588_bl31_v1.45.elf"
RKBIN_TPL="bin/rk35/rk3588_ddr_lp4_2112MHz_lp5_2400MHz_v1.16.bin"

# ── image layout ─────────────────────────────────────────────────────────────
IMAGE_SIZE_MB=4096
ROOTFS_OFFSET_MB=32            # rootfs partition starts at 32 MiB
ROOTFS_FSTYPE="ext4"
ROOTFS_LABEL="rootfs"

# ── serial console ───────────────────────────────────────────────────────────
SERIAL_TTY="ttyFIQ0"
SERIAL_BAUD="1500000"

# ── GPU / NPU userspace ────────────────────────────────────────────────────
# Mali Valhall G610 userspace blob (GBM variant, headless)
LIBMALI_URL="https://github.com/JeffyCN/mirrors/raw/libmali/lib/aarch64-linux-gnu/libmali-valhall-g610-g13p0-gbm.so"

# RKNPU2 runtime
RKNPU2_URL="https://github.com/rockchip-linux/rknpu2/archive/refs/heads/master.tar.gz"
