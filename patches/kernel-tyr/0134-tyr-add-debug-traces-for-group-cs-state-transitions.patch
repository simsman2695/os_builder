From 436d02a6ae8f566132dae94f604788687ec10a70 Mon Sep 17 00:00:00 2001
From: Daniel Almeida <daniel.almeida@collabora.com>
Date: Mon, 27 Oct 2025 11:36:18 -0300
Subject: [PATCH 134/161] tyr: add debug traces for group/cs state transitions

These are actually informative while we develop the driver.
---
 drivers/gpu/drm/tyr/sched/events.rs | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/drivers/gpu/drm/tyr/sched/events.rs b/drivers/gpu/drm/tyr/sched/events.rs
index 6675446090..c870d0296e 100644
--- a/drivers/gpu/drm/tyr/sched/events.rs
+++ b/drivers/gpu/drm/tyr/sched/events.rs
@@ -356,6 +356,7 @@ fn handle_state_change(
                     let csg_iface = glb_iface.csg_mut(csg_idx).ok_or(EINVAL)?;
                     for (cs_idx, _) in inner.queues.iter_mut().enumerate() {
                         let cs_iface = csg_iface.cs_mut(cs_idx).ok_or(EINVAL)?;
+                        pr_info!("Stopping cs id {}\n", cs_idx);
                         cs_iface.set_state(crate::sched::StreamState::Stop)?;
                     }
                 }
@@ -402,6 +403,12 @@ pub(crate) fn sync_group_state(&mut self, data: &Arc<TyrData>, csg_idx: usize) -
 
         let fw = &data.fw;
         fw.with_locked_global_iface(|glb_iface| {
+            pr_info!(
+                "Syncing group at csg_idx {}: {:?} -> {:?}\n",
+                csg_idx,
+                old_state,
+                update
+            );
             glb_iface.set_csg_state(csg_idx, update)?;
             glb_iface.ring_csg_doorbell(csg_idx)?;
             let output = glb_iface.read_output()?;
-- 
2.51.0

